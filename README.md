# API-Football Smartbets

**FastAPI service for predictions and data from API-Football**

---

## Table of Contents

- [Description](#description)
- [Requirements](#requirements)
- [Setup](#setup)
- [Environment Variables](#environment-variables)
- [Running the Server](#running-the-server)
- [API Documentation](#api-documentation)
- [Endpoints](#endpoints)
  - [Countries](#countries)
  - [Leagues](#leagues)
  - [Teams](#teams)
  - [Standings](#standings)
  - [Fixtures](#fixtures)
  - [Predictions](#predictions)
  - [API-Football Predictions](#api-football-predictions)
  - [Odds (Pre-Match)](#odds-pre-match)
- [Models](#models)
- [Contributing](#contributing)
- [License](#license)

---

## Description

This service provides REST endpoints for retrieving football data and predictions by consuming the 
[API-Football](https://www.api-football.com/) v3 API. It uses FastAPI, Pydantic, and Uvicorn.

## Requirements

- Python 3.11+
- API-Football API key
- `pip`

## Setup

```bash
git clone https://github.com/darkotosic/api-football-smartbets.git
cd api-football-smartbets
python -m venv .venv
# macOS/Linux
source .venv/bin/activate
# Windows PowerShell
.\.venv\Scripts\Activate.ps1
pip install --upgrade pip
pip install -r requirements.txt
```

## Environment Variables

Create a `.env` file in the project root with:

```ini
API_FOOTBALL_KEY=your_api_football_key_here
```

## Running the Server

```bash
uvicorn main:app --reload
```

The API will be available at `http://127.0.0.1:8000`.

## API Documentation

Interactive Swagger UI: `http://127.0.0.1:8000/docs`

---

## Endpoints

### Countries

- **`GET /countries/`**  
  Retrieve list of supported countries.

### Leagues

- **`GET /leagues/?country={country_name}`**  
  List leagues, optionally filtered by country.
- **`GET /leagues/{league_id}/seasons`**  
  List available seasons for a given league.

### Teams

- **`GET /teams/?league={league_id}&season={year}`**  
  List teams for a league and season.
- **`GET /teams/{team_id}/statistics?season={year}`**  
  Retrieve statistics for a specific team.

### Standings

- **`GET /standings/?league={league_id}&season={year}`**  
  Fetch league standings.

### Fixtures

- **`GET /fixtures/?date={YYYY-MM-DD}&league={id}&season={year}`**  
  List fixtures for a given date.
- **`GET /fixtures/rounds?league={id}&season={year}`**  
  Retrieve fixture rounds.
- **`GET /fixtures/head2head?team1={id}&team2={id}`**  
  Fetch head-to-head fixtures between two teams.
- **`GET /fixtures/{fixture_id}/statistics`**  
  Fetch statistics for a fixture.
- **`GET /fixtures/{fixture_id}/events`**  
  Fetch events for a fixture.

### Predictions

- **`GET /predictions/?date={YYYY-MM-DD}&league={id}&season={year}&bookmaker={id}`**  
  Returns custom prediction responses generated by the service.

### API-Football Predictions

- **`GET /predictions-api/?date={YYYY-MM-DD}&league={id}&season={year}`**  
  Proxy for official API-Football predictions endpoint.

### Odds (Pre-Match)

- **`GET /odds/?date={YYYY-MM-DD}&league={id}&season={year}&bookmaker={id}`**  
  Retrieve odds for fixtures.
- **`GET /odds/mapping`**  
  List available odds mappings.
- **`GET /odds/bookmakers`**  
  List supported bookmakers.

---

## Models

Each endpoint returns typed Pydantic models defined in `models.py`, including:

- **Country**
- **League**, **LeagueSeasonList**
- **Team**, **TeamStatistics**
- **StandingEntry**
- **Fixture**, **FixtureInfo**, **Venue**, **FixtureTeams**, **FixtureStatus**, **FixtureStatistic**, **FixtureEvent**
- **PredictionResponse**, **APIPrediction**
- **OddsResponse**, **BookmakerInfo**, **OddsMappingEntry**

---

## Contributing

Contributions are welcome! Please open issues or submit pull requests.

---

## License

This project is licensed under the MIT License.  
Â© darkotosic
